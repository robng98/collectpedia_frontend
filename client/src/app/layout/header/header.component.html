<header>
    <div class="logo-section">
        <div class="logo-container">
            <div class="logo-icon">
                <img src="/logo2.svg" alt="Collectpedia Logo">
            </div>
            <a routerLink="" class="logo-text">
                Collectpedia
            </a>
        </div>

        <div class="search-wrapper">
            <form #searchForm="ngForm" (ngSubmit)="onSearchChange()">
                <div class="search-container">
                    <div class="search-icon-container">
                        <mat-icon aria-hidden="false" aria-label="search icon">search</mat-icon>
                    </div>
                    <input class="search-input" placeholder="Buscar" name="search"
                        [(ngModel)]="searchParams.search" required />
                    <div class="flex items-center mt-2">
                        <mat-form-field appearance="fill" class="max-w-20">
                            <mat-select [(ngModel)]="searchParams.type" name="type" required>
                                <mat-option value="comics">/co</mat-option>
                                <mat-option value="mangas">/ma</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <button type="submit" mat-icon-button [disabled]="!isValidSearch(searchParams.search) || !searchParams.type">
                            <mat-icon>arrow_forward</mat-icon>
                        </button>
                    </div>
                </div>
            </form>
        </div>

        <nav>
            <a routerLink="/mangas">Mangás</a>
            <a routerLink="/comics">Comics</a>
            <a routerLink="/publishers">Editoras</a>
        </nav>
    </div>

    <div class="actions-section">
        <div class="buttons-container">
            <!-- Show these buttons only when user is NOT logged in -->
            <ng-container *ngIf="!currentUser">
                <button class="login-button" routerLink="account/register">
                    <span>Cadastrar</span>
                </button>
                <button class="login-button" routerLink="account/login">
                    <span>Login</span>
                </button>
            </ng-container>
            
            <!-- Show these elements only when user IS logged in -->
            <ng-container *ngIf="currentUser">
                <div class="welcome-text">Olá, {{ currentUser.fullName || currentUser.email }}!</div>
                <button class="login-button" routerLink="/user">
                    <span>Perfil</span>
                </button>
                <button class="login-button" (click)="logout()">
                    <span>Logout</span>
                </button>
                <!-- <button class="notification-button">
                    <div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                            <path d="M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216ZM48,184c7.7-13.24,16-43.92,16-80a64,64,0,1,1,128,0c0,36.05,8.28,66.73,16,80Z"></path>
                        </svg>
                    </div>
                </button> -->
            </ng-container>
        </div>
        
        <!-- Display profile picture only for logged in users, otherwise placeholder -->
        <!-- <div class="profile-picture" 
             [style.background-image]="currentUser ? 'url(\'/assets/images/profile.png\')' : 'url(\'./no-profile-picture-15257.svg\')'">
        </div> -->
    </div>
</header>